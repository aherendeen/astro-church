---
import background from "../assets/background.svg";
---

<div id="container" aria-hidden="false">
	<!-- Background is lazy: only loads when data-active="true" on the wrapper -->
	<img
		id="background"
		src=""
		alt="soft church background"
		data-src={background.src}
	/>

	<main>
		<section id="hero" class="church-hero">
			<div class="hero-inner">
				<div class="site-title">Astro Church</div>
				<h1>
					crafted with <span class="heart">ðŸ©µ</span> for church communities worldwide
				</h1>
				<p class="lead">
					A small, lightweight celebration â€” open from the footer heart.
				</p>
				<div class="actions">
					<a class="button" href="/about-us">Learn about our church</a>
					<a class="button outline" href="/im-new">I'm New</a>
				</div>
			</div>
		</section>
	</main>
</div>

<style>
	#background {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: -1;
		filter: blur(80px) saturate(1.05);
		opacity: 0.9;
	}

	#container {
		font-family: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans",
			Arial, sans-serif;
		height: 100%;
		color: #0f172a;
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 3rem;
	}

	.church-hero {
		background: rgba(255, 255, 255, 0.92);
		border-radius: 14px;
		padding: 2rem;
		max-width: 820px;
		width: 100%;
		box-shadow: 0 8px 30px rgba(2, 6, 23, 0.12);
	}

	.hero-inner {
		text-align: center;
	}
	h1 {
		font-size: 28px;
		margin: 0.5rem 0 0.25rem;
	}
	.lead {
		color: #475569;
		margin-bottom: 1rem;
	}

	.actions {
		display: flex;
		gap: 12px;
		justify-content: center;
		margin-top: 1rem;
	}
	.button {
		padding: 10px 14px;
		border-radius: 10px;
		background: #064e3b;
		color: white;
		text-decoration: none;
	}
	.button.outline {
		background: transparent;
		border: 1px solid #064e3b;
		color: #064e3b;
	}

	.heart {
		display: inline-block;
		transform-origin: center;
	}
	/* subtle heartbeat when the modal is active */
	[data-active="true"] .heart {
		animation: heartbeat 1s infinite;
	}
	@keyframes heartbeat {
		0% {
			transform: scale(1);
		}
		25% {
			transform: scale(1.18);
		}
		40% {
			transform: scale(0.98);
		}
		60% {
			transform: scale(1.08);
		}
		100% {
			transform: scale(1);
		}
	}

	/* hide the original news box (not relevant) */
	#news {
		display: none;
	}

	@media (max-width: 768px) {
		.church-hero {
			padding: 1.25rem;
		}
		h1 {
			font-size: 20px;
		}
	}
</style>

<script>
	// Lightweight client-side behavior to set background src only when the parent container is activated.
	(function () {
		const container = document.getElementById("container");
		if (!container) return;

		function loadBackground() {
			const imgEl = document.getElementById("background");
			if (!imgEl) return;
			if (imgEl.dataset && imgEl.dataset.src && !imgEl.getAttribute("src")) {
				imgEl.setAttribute("src", imgEl.dataset.src);
			}
		}

		if (container.dataset.active === "true") {
			loadBackground();
		}

		const observer = new MutationObserver((mutations) => {
			for (const m of mutations) {
				if (m.attributeName === "data-active") {
					if (container.dataset.active === "true") loadBackground();
				}
			}
		});
		observer.observe(container, { attributes: true });
	})();
</script>
